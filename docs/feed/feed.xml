<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:base="en">
	<title>stinky.blog</title>
	<subtitle>brain of brian. notes about fun things i&#39;m learning</subtitle>
	<link href="https://stinky.blog/feed/feed.xml" rel="self"/>
	<link href="https://stinky.blog/"/>
	<updated>2024-03-03T00:00:00Z</updated>
	<id>https://stinky.blog/</id>
	<author>
		<name>Brian</name>
		<email>brianm88@gmail.com</email>
	</author>
	
	<entry>
		<title>Adios Wordpress?</title>
		<link href="https://stinky.blog/blog/adios-wordpress/"/>
		<updated>2024-03-03T00:00:00Z</updated>
		<id>https://stinky.blog/blog/adios-wordpress/</id>
		<content type="html">&lt;p&gt;Welcome to my first post on a static site.  Wordpress has been super cool, but I really wanted to try out something simpler and easier to deploy from the commandline.&lt;/p&gt;
&lt;p&gt;It has been a blast hosting the blog on the VPS and learning the ins-and-outs of securing the server, managing the certificates, and general wordpress admin stuff.  Wordpress plugins have been very awesome and easy to use, even the free ones.  However, it&#39;s just a ton of functionality that I don&#39;t really need.&lt;/p&gt;
&lt;p&gt;I watched a couple of youtube videos about hosting static sites on github pages with jekyll and other static site generators.  That led me to trying out a few of them before landing on this one, eleventy.&lt;/p&gt;
&lt;p&gt;To get this running, I created a github repository: username.github.io&lt;/p&gt;
&lt;p&gt;Then, I cloned the repo to my home folder&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/brianm88/brianm88.github.io&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I used this eleventy template: &lt;a href=&quot;https://github.com/11ty/eleventy-base-blog&quot;&gt;eleventy-base-blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Cloned those files to my github folder and ran eleventy:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx @11ty/eleventy &lt;span class=&quot;token parameter variable&quot;&gt;--serve&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There I had a working skeleton!  But, I wanted a search bar.  So I found a solution with pagefind: &lt;a href=&quot;https://pagefind.app/&quot;&gt;pagefind&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pretty much just need to insert this line into one of the pages to get it working.  In my case, inserted it in to /my-repo/_includes/layouts/home.njk&lt;/p&gt;
&lt;pre class=&quot;language-http&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-http&quot;&gt;&amp;lt;link href=&quot;/pagefind/pagefind-ui.css&quot; rel=&quot;stylesheet&quot;&gt;
&amp;lt;script src=&quot;/pagefind/pagefind-ui.js&quot;&gt;&amp;lt;/script&gt;
&amp;lt;div id=&quot;search&quot;&gt;&amp;lt;/div&gt;
&amp;lt;script&gt;
    window.addEventListener(&#39;DOMContentLoaded&#39;, (event) =&gt; {
        new PagefindUI({ element: &quot;#search&quot;, showSubResults: true });
    });
&amp;lt;/script&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, you need to run the indexer to let it build an index of your site files.&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt; pagefind &lt;span class=&quot;token parameter variable&quot;&gt;--site&lt;/span&gt; _site&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then I had some weird issues getting github pages to let me select the right folder.  So, I created a /docs/ folder like they suggest, and I just rsynced the stuff into it.  I wrote this into a script so I can execute all this in one command.  The script also takes a commit comment and pushes to github:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 11ty build&lt;/span&gt;
npx @11ty/eleventy

&lt;span class=&quot;token comment&quot;&gt;# pagefind build index&lt;/span&gt;
npx &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt; pagefind &lt;span class=&quot;token parameter variable&quot;&gt;--site&lt;/span&gt; _site/

&lt;span class=&quot;token comment&quot;&gt;# rsync to gitpages folder&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;rsync&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-arui&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--delete&lt;/span&gt; _site/ docs

&lt;span class=&quot;token comment&quot;&gt;# Prompt for commit message&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Enter commit message:&quot;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; commit_message

&lt;span class=&quot;token comment&quot;&gt;# git operations&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; docs
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; commit &lt;span class=&quot;token parameter variable&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$commit_message&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; push &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; origin main&lt;/code&gt;&lt;/pre&gt;
</content>
	</entry>
	
	<entry>
		<title>Proxmox TLS, SSH, Certificate Errors</title>
		<link href="https://stinky.blog/blog/pmx-certificate-error/"/>
		<updated>2023-01-01T00:00:00Z</updated>
		<id>https://stinky.blog/blog/pmx-certificate-error/</id>
		<content type="html">&lt;p&gt;Occasionally while adding/removing a node or making other significant changes to your Proxmox cluster, you&#39;ll get some errors about unauthorized SSH keys or Certificates.  You might be unable to migrate VMs/containers, unable to use virtual consoles, or unable to access the web interface at all.&lt;/p&gt;
&lt;p&gt;One example error:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;tls_process_server_certificate: certificate verify failed (596)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Generally, executing the following command will fix it right up:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pvecm updatecerts &lt;span class=&quot;token parameter variable&quot;&gt;-F&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl restart pvedaemon pveproxy&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sometimes, the nuclear option is required.  That means deleting all instances of the problem node from SSH known_hosts, verifying /etc/hosts info is correct on each node, and then executing the following:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pvecm updatecerts &lt;span class=&quot;token parameter variable&quot;&gt;-F&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pve-cluster stop &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; corosync stop &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pvestatd stop &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pveproxy stop &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pvedaemon stop

&lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pve-cluster start &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; corosync start &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pvestatd start &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt; pveproxy start&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I have had these errors occur after reinstalling Proxmox on a node and attempting to rejoin the cluster with the same hostname/ip.  Performing the steps above usually gets me back in business pretty quickly.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Proxmox + Qbittorrent + Wireguard + Samba LXC</title>
		<link href="https://stinky.blog/blog/pmx-qbit-wg-lxc/"/>
		<updated>2022-12-01T00:00:00Z</updated>
		<id>https://stinky.blog/blog/pmx-qbit-wg-lxc/</id>
		<content type="html">&lt;p&gt;A google search for how to create this type of container will bring up a bunch of malarkey. It doesnâ€™t have to be that complicated. You can set this up in a few minutes super easily. The result is an extremely lightweight and effective torrent box that you can control remotely. It works great on very modest hardware even with lots of traffic flowing.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/0p3kt2JHsC-579.avif 579w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/0p3kt2JHsC-579.webp 579w&quot;&gt;&lt;img alt=&quot;container info&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/0p3kt2JHsC-579.jpeg&quot; width=&quot;579&quot; height=&quot;346&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;h2 id=&quot;first-spin-up-a-container&quot; tabindex=&quot;-1&quot;&gt;First, spin up a container. &lt;a class=&quot;header-anchor&quot; href=&quot;https://stinky.blog/blog/pmx-qbit-wg-lxc/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/RQSkXuO37I-791.avif 791w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/RQSkXuO37I-791.webp 791w&quot;&gt;&lt;img alt=&quot;container creation&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/RQSkXuO37I-791.jpeg&quot; width=&quot;791&quot; height=&quot;387&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;Click on the local storage of one of your nodes, go to container templates, and click the Templates button. I am using the ubuntu 22.10-standard template, only 129mb.&lt;/p&gt;
&lt;p&gt;After downloading the template, right click your node and create the container. On the first page, make sure to uncheck â€˜unprivileged containerâ€™ so that we will have full write access to the samba share. If you are storing files some other way, you can leave it unprivileged. (You can also achieve write access to cifs shares with an unprivileged container through user mapping if you so choose.)&lt;/p&gt;
&lt;p&gt;Select the ubuntu template on the next page. I went with the defaults for all the other options except 2 cpu cores and a static IP address.&lt;/p&gt;
&lt;h2 id=&quot;start-the-container&quot; tabindex=&quot;-1&quot;&gt;Start the container! &lt;a class=&quot;header-anchor&quot; href=&quot;https://stinky.blog/blog/pmx-qbit-wg-lxc/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Now we can start the container and do some stuff.&lt;/p&gt;
&lt;p&gt;First, login with username root and the password you set during creation. Update everything with&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; update &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; upgrade &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, we need to install a few things&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; wireguard wireguard-tools &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; qbittorrent-nox cifs-utils iftop&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Since we installed cifs-utils in the last step, letâ€™s go ahead and mount the network share. Edit your fstab file:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;nano&lt;/span&gt; /etc/fstab&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I have created a user on my NAS named qbit for this service and added it to the samba permissions. It only has access to a folder for downloads. My fstab looks kinda like this:&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/oxosvwo3TL-875.avif 875w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/oxosvwo3TL-875.webp 875w&quot;&gt;&lt;img alt=&quot;fstab config&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/oxosvwo3TL-875.jpeg&quot; width=&quot;875&quot; height=&quot;79&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ctrl + X&lt;/strong&gt; to save, then type &lt;strong&gt;reboot&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The share should mount on reboot. If not, check for errors with &lt;strong&gt;journalctl -b&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;let-s-dig-a-wireguard-tunnel&quot; tabindex=&quot;-1&quot;&gt;Letâ€™s dig a wireguard tunnel &lt;a class=&quot;header-anchor&quot; href=&quot;https://stinky.blog/blog/pmx-qbit-wg-lxc/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Now you need to log into your VPN provider of choice and download your wireguard configuration. One easy way to do this would be to drop it on your NAS if you have connected one in the last step.&lt;/p&gt;
&lt;p&gt;Navigate to wherever you put that config file so we can move it to its final resting place. Below, mine is named wireguard-vpn.conf:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mv&lt;/span&gt; wireguard-vpn.conf /etc/wireguard/wireguard-vpn.conf &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; /etc/wireguard &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Letâ€™s see if that bad boy works:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;wg-quick up wireguard-vpn&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/qBkKeZntks-836.avif 836w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/qBkKeZntks-836.webp 836w&quot;&gt;&lt;img alt=&quot;wireguard output&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/qBkKeZntks-836.jpeg&quot; width=&quot;836&quot; height=&quot;333&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;If you connected successfully, typing &lt;strong&gt;ip addr show&lt;/strong&gt; will list a new tunnel interface at the bottom with your VPN IP!&lt;/p&gt;
&lt;p&gt;Now make it reconnect automatically on reboot:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;systemctl &lt;span class=&quot;token builtin class-name&quot;&gt;enable&lt;/span&gt; wg-quick@wireguard-vpn&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reboot and hit it with another &lt;strong&gt;ip addr show&lt;/strong&gt; to make sure weâ€™re still connected to the tunnel!&lt;/p&gt;
&lt;h2 id=&quot;enable-qbittorrent-nox&quot; tabindex=&quot;-1&quot;&gt;Enable qbittorrent-nox &lt;a class=&quot;header-anchor&quot; href=&quot;https://stinky.blog/blog/pmx-qbit-wg-lxc/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Weâ€™re on the home stretch! Now make a service that will start qbittorrent-nox automatically on boot:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;nano&lt;/span&gt; /etc/systemd/system/qbittorrent-nox.service&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Weâ€™ll keep it super simple:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Unit&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;qBittorrent-nox &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;Documentation&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;man:qbittorrent-nox&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;Wants&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;network-online.target
&lt;span class=&quot;token assign-left variable&quot;&gt;After&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;network-online.target nss-lookup.target

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Service&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;exec
&lt;span class=&quot;token assign-left variable&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/bin/qbittorrent-nox

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Install&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;multi-user.target&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now enable it and reboot to see if it works:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;systemctl &lt;span class=&quot;token builtin class-name&quot;&gt;enable&lt;/span&gt; qbittorrent-nox &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl daemon-reload &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reboot&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Did it work?? You can try it by opening your web browser and typing in the local IP of the machine followed by port 8080!&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/WX1esYhBMp-759.avif 759w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/WX1esYhBMp-759.webp 759w&quot;&gt;&lt;img alt=&quot;working qbit interface&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/WX1esYhBMp-759.jpeg&quot; width=&quot;759&quot; height=&quot;577&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;h2 id=&quot;bind-qbt-nox-to-wireguard-interface&quot; tabindex=&quot;-1&quot;&gt;Bind Qbt-nox to wireguard interface &lt;a class=&quot;header-anchor&quot; href=&quot;https://stinky.blog/blog/pmx-qbit-wg-lxc/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Last step! Go to &lt;strong&gt;Tools -&amp;gt; Options -&amp;gt; Advanced&lt;/strong&gt; and set the client to ONLY use the wireguard tunnel that we have created. If your VPN provides you a static IP, you can optionally set the client to ONLY use this IP as well.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/Ytfrprzav2-837.avif 837w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/Ytfrprzav2-837.webp 837w&quot;&gt;&lt;img alt=&quot;bind to wireguard&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/Ytfrprzav2-837.jpeg&quot; width=&quot;837&quot; height=&quot;969&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;Now set your download folder to your samba share in the Downloads tab.&lt;/p&gt;
&lt;p&gt;Thatâ€™s it! Now you can log in through this web interface from now on. You never have to access the container directly again. Add torrents by copying and pasting the magnet links into the webui from your phone or any other device!&lt;/p&gt;
&lt;p&gt;Ensure that traffic is flowing through the wireguard tunnel as expected by running the &lt;strong&gt;iftop&lt;/strong&gt; utility we downloaded earlier.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>e-waste resurrection</title>
		<link href="https://stinky.blog/blog/e-waste/e-waste-resurrection/"/>
		<updated>2022-12-01T00:00:00Z</updated>
		<id>https://stinky.blog/blog/e-waste/e-waste-resurrection/</id>
		<content type="html">&lt;p&gt;Building a homelab on the cheap means using what you have laying aroundâ€“even if what you have laying around is a dead Dell Inspiron 3521 from a decade ago. This laptop has already lived several lives. It got the wife through college. Before that, it traveled with the mother-in-law for business. It was pretty bad even back then, with a bendy plastic shell, mushy keyboard, and a screen like a gas pump. It does have an ivybridge i3, though! A 17-watt, 2 core, 4 thread behemoth locked at 1.9ghz with no turbo option. It has vt-d support and some usb ports, so it will be perfect as a node in my cluster for light containers and VMs like my NAS and Wireguard tunnels.&lt;/p&gt;
&lt;p&gt;The only problem: it doesnâ€™t boot. It doesnâ€™t even beep!&lt;/p&gt;
&lt;p&gt;Of course the cmos battery had died after all these years. Changing the battery got it to post! but only once. I accidentally knocked the cmos battery back out while it was running and corrupted the bios. It was SUPER dead this time, the cpu fan would only spin a partial turn before giving up.&lt;/p&gt;
&lt;p&gt;But never fear! Fixing a corrupted bios is pretty simple. The only two tools required are another working computer and a ch341a programmer (about $10 on Amazon) like this:&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/EJWA0REtGb-600.avif 600w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/EJWA0REtGb-600.webp 600w&quot;&gt;&lt;img alt=&quot;CH341a programmer&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/EJWA0REtGb-600.jpeg&quot; width=&quot;600&quot; height=&quot;595&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;I found a dump of the original bios in a 2014 forum post on badcaps.net (thanks siddiq from ghana!).&lt;/p&gt;
&lt;p&gt;The ch341a comes with an 8-pin clip that connects directly to the pins on the bios chip. It is a little bit wobbly, and it will not read properly until it is making good contact with all 8 pins. You can make sure its working correctly by dumping the bios to a file, and then verifying the checksum against the file. The flashrom guide here was super easy to follow.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/NMj50i8V_A-600.avif 600w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/NMj50i8V_A-600.webp 600w&quot;&gt;&lt;img alt=&quot;CH341a hooked up to bios chip and thinkpad&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/NMj50i8V_A-600.jpeg&quot; width=&quot;600&quot; height=&quot;450&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;Flashrom autodetected the Winbond bios chip, I made a backup dump, and the checksum matched on the first try. I went ahead with flashrom -w on the dump I found online andâ€¦ tadaaaa!&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://stinky.blog/img/77HSpyVhFc-600.avif 600w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://stinky.blog/img/77HSpyVhFc-600.webp 600w&quot;&gt;&lt;img alt=&quot;e-waste resurrected!  ready to begin a proxmox cluster.&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://stinky.blog/img/77HSpyVhFc-600.jpeg&quot; width=&quot;600&quot; height=&quot;450&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;It works! Now it is a fully functioning node in my Proxmox cluster. On to rescuing more e-waste for the homelab.&lt;/p&gt;
</content>
	</entry>
</feed>
